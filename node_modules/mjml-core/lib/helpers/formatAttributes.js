"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _defineProperty2 = _interopRequireDefault(require("@babel/runtime/helpers/defineProperty"));

var _objectSpread4 = _interopRequireDefault(require("@babel/runtime/helpers/objectSpread2"));

var _lodash = require("lodash");

var _type = require("../types/type");

var _default = function _default(attributes, allowedAttributes) {
  return (0, _lodash.reduce)(attributes, function (acc, val, attrName) {
    if (allowedAttributes && allowedAttributes[attrName]) {
      var TypeConstructor = (0, _type.initializeType)(allowedAttributes[attrName]);

      if (TypeConstructor) {
        var type = new TypeConstructor(val);
        return (0, _objectSpread4["default"])({}, acc, (0, _defineProperty2["default"])({}, attrName, type.getValue()));
      }
    }

    return (0, _objectSpread4["default"])({}, acc, (0, _defineProperty2["default"])({}, attrName, val));
  }, {});
};

exports["default"] = _default;
module.exports = exports.default;